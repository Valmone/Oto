
<fieldset style="width: 48%; float: left;">
	
	<legend>Flotte</legend>

	<table id="shiptable" style="margin: 20px;">
		<tbody>
			<tr>
				<td>Petit transporteur</td>
				<td align="center"><input type="text" name="ship_a_0_b" value="" size="6" maxlength="8" tabindex="1" id="ship_a_0_b"></td>
				<td align="left" style="width:50px">-&gt;&nbsp;<div id="ship_a_0_e" style="display:inline"></div></td>
				<td align="center"><input type="text" name="ship_d_0_b" value="" size="6" maxlength="8" tabindex="23" id="ship_d_0_b"></td>
				<td align="left" style="width:50px">-&gt;&nbsp;<div id="ship_d_0_e" style="display:inline"></div></td>
			</tr>
			<tr>
				<td>Grand transporteur</td>
				<td align="center"><input type="text" name="ship_a_1_b" value="" size="6" maxlength="8" tabindex="2" id="ship_a_1_b"></td>
				<td align="left" style="width:50px">-&gt;&nbsp;<div id="ship_a_1_e" style="display:inline"></div></td>
				<td align="center"><input type="text" name="ship_d_1_b" value="" size="6" maxlength="8" tabindex="24" id="ship_d_1_b"></td>
				<td align="left" style="width:50px">-&gt;&nbsp;<div id="ship_d_1_e" style="display:inline"></div></td>
			</tr>
			<tr>
				<td>Chasseur leger</td>
				<td align="center"><input type="text" name="ship_a_2_b" value="" size="6" maxlength="8" tabindex="3" id="ship_a_2_b"></td>
				<td align="left" style="width:50px">-&gt;&nbsp;<div id="ship_a_2_e" style="display:inline"></div></td>
				<td align="center"><input type="text" name="ship_d_2_b" value="" size="6" maxlength="8" tabindex="25" id="ship_d_2_b"></td>
				<td align="left" style="width:50px">-&gt;&nbsp;<div id="ship_d_2_e" style="display:inline"></div></td>
			</tr>
			<tr>
				<td>Chasseur lourd</td>
				<td align="center"><input type="text" name="ship_a_3_b" value="" size="6" maxlength="8" tabindex="4" id="ship_a_3_b"></td>
				<td align="left" style="width:50px">-&gt;&nbsp;<div id="ship_a_3_e" style="display:inline"></div></td>
				<td align="center"><input type="text" name="ship_d_3_b" value="" size="6" maxlength="8" tabindex="26" id="ship_d_3_b"></td>
				<td align="left" style="width:50px">-&gt;&nbsp;<div id="ship_d_3_e" style="display:inline"></div></td>
			</tr>
			<tr>
				<td>Croiseur</td>
				<td align="center"><input type="text" name="ship_a_4_b" value="" size="6" maxlength="8" tabindex="5" id="ship_a_4_b"></td>
				<td align="left" style="width:50px">-&gt;&nbsp;<div id="ship_a_4_e" style="display:inline"></div></td>
				<td align="center"><input type="text" name="ship_d_4_b" value="" size="6" maxlength="8" tabindex="27" id="ship_d_4_b"></td>
				<td align="left" style="width:50px">-&gt;&nbsp;<div id="ship_d_4_e" style="display:inline"></div></td>
			</tr>
			<tr>
				<td>Vaisseau de bataille</td>
				<td align="center"><input type="text" name="ship_a_5_b" value="" size="6" maxlength="8" tabindex="6" id="ship_a_5_b"></td>
				<td align="left" style="width:50px">-&gt;&nbsp;<div id="ship_a_5_e" style="display:inline"></div></td>
				<td align="center"><input type="text" name="ship_d_5_b" value="" size="6" maxlength="8" tabindex="28" id="ship_d_5_b"></td>
				<td align="left" style="width:50px">-&gt;&nbsp;<div id="ship_d_5_e" style="display:inline"></div></td>
			</tr>
			<tr>
				<td>Vaisseau de colonisation</td>
				<td align="center"><input type="text" name="ship_a_6_b" value="" size="6" maxlength="8" tabindex="7" id="ship_a_6_b"></td>
				<td align="left" style="width:50px">-&gt;&nbsp;<div id="ship_a_6_e" style="display:inline"></div></td>
				<td align="center"><input type="text" name="ship_d_6_b" value="" size="6" maxlength="8" tabindex="29" id="ship_d_6_b"></td>
				<td align="left" style="width:50px">-&gt;&nbsp;<div id="ship_d_6_e" style="display:inline"></div></td>
			</tr>
			<tr>
				<td>Recycleur</td>
				<td align="center"><input type="text" name="ship_a_7_b" value="" size="6" maxlength="8" tabindex="8" id="ship_a_7_b"></td>
				<td align="left" style="width:50px">-&gt;&nbsp;<div id="ship_a_7_e" style="display:inline"></div></td>
				<td align="center"><input type="text" name="ship_d_7_b" value="" size="6" maxlength="8" tabindex="30" id="ship_d_7_b"></td>
				<td align="left" style="width:50px">-&gt;&nbsp;<div id="ship_d_7_e" style="display:inline"></div></td>
			</tr>
			<tr>
				<td>Sonde espionnage</td>
				<td align="center"><input type="text" name="ship_a_8_b" value="" size="6" maxlength="8" tabindex="9" id="ship_a_8_b"></td>
				<td align="left" style="width:50px">-&gt;&nbsp;<div id="ship_a_8_e" style="display:inline"></div></td>
				<td align="center"><input type="text" name="ship_d_8_b" value="" size="6" maxlength="8" tabindex="31" id="ship_d_8_b"></td>
				<td align="left" style="width:50px">-&gt;&nbsp;<div id="ship_d_8_e" style="display:inline"></div></td>
			</tr>
			<tr>
				<td>Bombardier</td>
				<td align="center"><input type="text" name="ship_a_9_b" value="" size="6" maxlength="8" tabindex="10" id="ship_a_9_b"></td>
				<td align="left" style="width:50px">-&gt;&nbsp;<div id="ship_a_9_e" style="display:inline"></div></td>
				<td align="center"><input type="text" name="ship_d_9_b" value="" size="6" maxlength="8" tabindex="32" id="ship_d_9_b"></td>
				<td align="left" style="width:50px">-&gt;&nbsp;<div id="ship_d_9_e" style="display:inline"></div></td>
			</tr>
			<tr>
				<td>Satellite solaire</td>
				<td align="center">---</td><td></td>
				<td align="center"><input type="text" name="ship_d_10_b" value="" size="6" maxlength="8" tabindex="33" id="ship_d_10_b"></td>
				<td align="left" style="width:50px">-&gt;&nbsp;<div id="ship_d_10_e" style="display:inline"></div></td>
			</tr>
			<tr>
				<td>Destructeur</td>
				<td align="center"><input type="text" name="ship_a_11_b" value="" size="6" maxlength="8" tabindex="12" id="ship_a_11_b"></td>
				<td align="left" style="width:50px">-&gt;&nbsp;<div id="ship_a_11_e" style="display:inline"></div></td>
				<td align="center"><input type="text" name="ship_d_11_b" value="" size="6" maxlength="8" tabindex="34" id="ship_d_11_b"></td>
				<td align="left" style="width:50px">-&gt;&nbsp;<div id="ship_d_11_e" style="display:inline"></div></td>
			</tr>
			<tr>
				<td>Etoile de la mort</td>
				<td align="center"><input type="text" name="ship_a_12_b" value="" size="6" maxlength="7" tabindex="13" id="ship_a_12_b"></td>
				<td align="left" style="width:50px">-&gt;&nbsp;<div id="ship_a_12_e" style="display:inline"></div></td>
				<td align="center"><input type="text" name="ship_d_12_b" value="" size="6" maxlength="7" tabindex="35" id="ship_d_12_b"></td>
				<td align="left" style="width:50px">-&gt;&nbsp;<div id="ship_d_12_e" style="display:inline"></div></td>
			</tr>
			<tr>
				<td>Traqueur</td>
				<td align="center"><input type="text" name="ship_a_13_b" value="" size="6" maxlength="8" tabindex="14" id="ship_a_13_b"></td>
				<td align="left" style="width:50px">-&gt;&nbsp;<div id="ship_a_13_e" style="display:inline"></div></td>
				<td align="center"><input type="text" name="ship_d_13_b" value="" size="6" maxlength="8" tabindex="36" id="ship_d_13_b"></td>
				<td align="left" style="width:50px">-&gt;&nbsp;<div id="ship_d_13_e" style="display:inline"></div></td>
			</tr>
			<tr><td></td><td colspan="2" align="left"><br></td><td colspan="2"></td></tr>
			<tr>
				<td>Lanceur de missiles</td>
				<td align="center">---</td><td></td>
				<td align="center"><input type="text" name="ship_d_14_b" value="" size="6" maxlength="8" tabindex="37" id="ship_d_14_b"></td>
				<td align="left" style="width:50px">-&gt;&nbsp;<div id="ship_d_14_e" style="display:inline"></div></td>
			</tr>
			<tr>
				<td>Artillerie laser legere</td>
				<td align="center">---</td><td></td>
				<td align="center"><input type="text" name="ship_d_15_b" value="" size="6" maxlength="8" tabindex="38" id="ship_d_15_b"></td>
				<td align="left" style="width:50px">-&gt;&nbsp;<div id="ship_d_15_e" style="display:inline"></div></td>
			</tr>
			<tr>
				<td>Artillerie laser lourde</td>
				<td align="center">---</td><td></td>
				<td align="center"><input type="text" name="ship_d_16_b" value="" size="6" maxlength="8" tabindex="39" id="ship_d_16_b"></td>
				<td align="left" style="width:50px">-&gt;&nbsp;<div id="ship_d_16_e" style="display:inline"></div></td>
			</tr>
			<tr>
				<td>Canon de Gauss</td>
				<td align="center">---</td><td></td>
				<td align="center"><input type="text" name="ship_d_17_b" value="" size="6" maxlength="8" tabindex="40" id="ship_d_17_b"></td>
				<td align="left" style="width:50px">-&gt;&nbsp;<div id="ship_d_17_e" style="display:inline"></div></td>
			</tr>
			<tr>
				<td>Artillerie a ions</td>
				<td align="center">---</td><td></td>
				<td align="center"><input type="text" name="ship_d_18_b" value="" size="6" maxlength="8" tabindex="41" id="ship_d_18_b"></td>
				<td align="left" style="width:50px">-&gt;&nbsp;<div id="ship_d_18_e" style="display:inline"></div></td>
			</tr>
			<tr>
				<td>Lanceur de plasma</td>
				<td align="center">---</td><td></td>
				<td align="center"><input type="text" name="ship_d_19_b" value="" size="6" maxlength="8" tabindex="42" id="ship_d_19_b"></td>
				<td align="left" style="width:50px">-&gt;&nbsp;<div id="ship_d_19_e" style="display:inline"></div></td>
			</tr>
			<tr>
				<td>Petit bouclier</td>
				<td align="center">---</td><td></td>
				<td align="center"><input type="text" name="ship_d_20_b" value="" size="6" maxlength="8" tabindex="43" id="ship_d_20_b"></td>
				<td align="left" style="width:50px">-&gt;&nbsp;<div id="ship_d_20_e" style="display:inline"></div></td>
			</tr>
			<tr>
				<td>Grand bouclier</td>
				<td align="center">---</td><td></td>
				<td align="center"><input type="text" name="ship_d_21_b" value="" size="6" maxlength="8" tabindex="44" id="ship_d_21_b"></td>
				<td align="left" style="width:50px">-&gt;&nbsp;<div id="ship_d_21_e" style="display:inline"></div></td>
			</tr>
			</tr><tr><td></td><td id="needed_ipm" align="center"></td><td colspan="3" align="right" style="padding-top:5px"><br><br><input type="button" value="Simuler" onclick="simulation();"></td></tr>
		</tbody>
	</table>
</fieldset>


<div  style="width: 48%; float: right;">
	<fieldset>
		<legend>Technologies</legend>
		<table style="margin: 0px;">
			<tbody><tr><th></th><th>Attaquant</th><th>Défenseur</th></tr>
				<tr>
					<td>Technologie Armes</td>
					<td align="center"><input type="text" name="tech_a_0" maxlength="2" size="3" value="10" tabindex="45"></td>
					<td align="center"><input type="text" name="tech_d_0" maxlength="2" size="3" value="10" tabindex="48"></td>
				</tr>
				<tr>
					<td>Technologie Bouclier</td>
					<td align="center"><input type="text" name="tech_a_1" maxlength="2" size="3" value="10" tabindex="46"></td>
					<td align="center"><input type="text" name="tech_d_1" maxlength="2" size="3" value="10" tabindex="49"></td>
				</tr>
				<tr>
					<td>Technologie Protection des vaisseaux spatiaux</td>
					<td align="center"><input type="text" name="tech_a_2" maxlength="2" size="3" value="10" tabindex="47"></td>
					<td align="center"><input type="text" name="tech_d_2" maxlength="2" size="3" value="10" tabindex="50"></td>
				</tr>
			</tbody>
		</table>
	</fieldset>

	<fieldset>
		<legend><h1>Resultat</h1></legend>
			
		<span id="qui_gagne"></span>
		<br>
		<span id="nbr_tour"></span>

	</fieldset>

</div>


<!--
</td></tr>
<tr><td>

<fieldset>
<legend>Cible</legend>
<table>
<tbody><tr>
<td>Nom:</td>
<td><input name="enemy_name" value="" maxlength="25" size="15"></td>
<td>Position:</td>
<td><input name="enemy_pos" id="enemy_pos" value="" maxlength="9" size="9"></td>
<td></td><td></td>
</tr>
<tr><td>Métal:</td><td><input name="enemy_metal" value="0" maxlength="15" size="10"></td>
<td>Cristal:</td><td><input name="enemy_crystal" value="0" maxlength="15" size="10"></td>
<td>Deutérium:</td><td><input name="enemy_deut" value="0" maxlength="15" size="10"></td></tr>
<tr>
<td colspan="6"><textarea id="read_field" rows="2" cols="10"></textarea>
<input type="button" onclick="read_text();" value="Charger">
<input type="button" onclick="document.getElementById('read_field').value='';" value="X">
</td>
</tr>
</tbody></table>
</fieldset> -->




<script type="text/javascript">
function simulation() {

	//---------------------------------//
	//---------------------------------//
	//---------------------------------//
	var attaquant = new Array(),
		defenseur = new Array(),
		total_attak = 0,
		total_def = 0,

		attaquant_tour = new Array(),
		defenseur_tour = new Array(),
		total_attak_tour = 0,
		total_def_tour = 0,

		degat_a_venir=0,
		rapidfire = false,
		nbr_rapidfire = 0,

		aflotte_reel = new Array(),
		acompteur_flotte_reel = 0,
		bflotte_reel = new Array(),
		bcompteur_flotte_reel = 0,

		result_moyenne_flotte = new Array(),
		aresult_moyenne_flotte = new Array(),
		marre_de_rajouter_des_variables = 0,
		bresult_moyenne_flotte = new Array(),

		RapidFire = new Array(),
		RapidFire = [
        /*					   pt  gt cle clo cro  vb  vc  etc...
        /*               PT */[-1, -1, -1, -1, -1, -1, -1, -1, 80, -1, 80, -1, -1, -1/*, -1, -1, -1, -1, -1, -1, -1, -1*/],
        /*               GT */[-1, -1, -1, -1, -1, -1, -1, -1, 80, -1, 80, -1, -1, -1/*, -1, -1, -1, -1, -1, -1, -1, -1*/],
        /*               Cl */[-1, -1, -1, -1, -1, -1, -1, -1, 80, -1, 80, -1, -1, -1/*, -1, -1, -1, -1, -1, -1, -1, -1*/],
        /*               CL */[-1, -1, -1, -1, -1, -1, -1, -1, 80, -1, 80, -1, -1, -1/*, -1, -1, -1, -1, -1, -1, -1, -1*/],
        /*               CR */[-1, -1, 83.33, -1, -1, -1, -1, -1, 80, -1, 80, -1, -1, -1/*, 90, -1, -1, -1, -1, -1, -1, -1*/],
        /*               VB */[-1, -1, -1, -1, -1, -1, -1, -1, 80, -1, 80, -1, -1, -1/*, -1, -1, -1, -1, -1, -1, -1, -1*/],
        /*               VC */[-1, -1, -1, -1, -1, -1, -1, -1, 80, -1, 80, -1, -1, -1/*, -1, -1, -1, -1, -1, -1, -1, -1*/],
        /*               RC */[-1, -1, -1, -1, -1, -1, -1, -1, 80, -1, 80, -1, -1, -1/*, -1, -1, -1, -1, -1, -1, -1, -1*/],
        /*               SE */[-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1/*, -1, -1, -1, -1, -1, -1, -1, -1*/],
        /*               BB */[-1, -1, -1, -1, -1, -1, -1, -1, 80, -1, 80, -1, -1, -1/*, 95, 95, 90, 90, -1, -1, -1, -1*/],
        /*               SS */[-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1/*, -1, -1, -1, -1, -1, -1, -1, -1*/],
        /*               DS */[-1, -1, -1, -1, -1, -1, -1, -1, 80, -1, 80, -1, -1, 50/*, -1, 90, -1, -1, -1, -1, -1, -1*/],
        /*               EM */[99.6, 99.6, 99.5, 99, 96.97, 99.667, 99.6, 99.6, 99.6, 96, 99.6, 80, 0, 93.333/*, 99.5, 99.5, 99, 99, 98, -1, -1, -1*/],
        /*               BC */[66.667, 66.667, -1, 75, 75, 85.7, -1, -1, 80, 80, -1, -1, -1, -1/*, -1, 90, -1, -1, -1, -1, -1, -1*/],
        /*               LM   [-1, -1, -1, -1, -1, -1, -1, -1, 80, 80, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
        /*               Ll   [-1, -1, -1, -1, -1, -1, -1, -1, 80, 80, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
        /*               LL   [-1, -1, -1, -1, -1, -1, -1, -1, 80, 80, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
        /*               AI   [-1, -1, -1, -1, -1, -1, -1, -1, 80, 80, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
        /*               CG   [-1, -1, -1, -1, -1, -1, -1, -1, 80, 80, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
        /*               LP   [-1, -1, -1, -1, -1, -1, -1, -1, 80, 80, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
        /*               PB   [-1, -1, -1, -1, -1, -1, -1, -1, 80, 80, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
        /*               GB   [-1, -1, -1, -1, -1, -1, -1, -1, 80, 80, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1]*/
];

	for (var i = 0; i < 15; i++)
		{
			result_moyenne_flotte[i] = new Array();
			aresult_moyenne_flotte[i] = new Array();
			bresult_moyenne_flotte[i] = new Array();
		}
	//---------------------------------//
	//---------------------------------//
	//---------------------------------//




	//-------------------------------------------------------------------------//
	//--------------------------------Fonctions--------------------------------//
	//-------------------------------------------------------------------------//
	function extraction_donnes() {
		total_attak = 0;
		total_def = 0;

		total_attak_tour = 0;
		total_def_tour = 0;

		degat_a_venir=0;
		rapidfire = false;
		nbr_rapidfire = 0;

		acompteur_flotte_reel = 0;
		bcompteur_flotte_reel = 0;

		function tablo(fleet, type, degat, bouclier, protection, attaquant_ou_pas) {	//on créer les flottes	
			if (attaquant_ou_pas === "attaquant")
				{
					for (var i = total_attak; i < (total_attak+fleet); i++)
						{
							attaquant[i] = new Array();
							attaquant[i][0] = type;				//type de vaisseau
							attaquant[i][1] = degat;			//arme
							attaquant[i][2] = bouclier;			//bouclier
							attaquant[i][3] = protection;		//protection
							attaquant[i][4] = bouclier;			//bouclier => valeur initial
							attaquant[i][5] = protection;		//protection => valeur initial
						}
					total_attak = total_attak + fleet;
					aflotte_reel[acompteur_flotte_reel] = new Array();
					aflotte_reel[acompteur_flotte_reel][0] = type;
					aflotte_reel[acompteur_flotte_reel][1] = fleet;
					acompteur_flotte_reel++;			
				}
			else if (attaquant_ou_pas === "defenseur")
				{
					for (var i = total_def; i < (total_def+fleet); i++)
						{
							defenseur[i] = new Array();
							defenseur[i][0] = type;				//type de vaisseau
							defenseur[i][1] = degat;			//arme
							defenseur[i][2] = bouclier;			//bouclier
							defenseur[i][3] = protection;		//protection
							defenseur[i][4] = bouclier;			//bouclier => valeur initial
							defenseur[i][5] = protection;		//protection => valeur initial
						}
					total_def = total_def + fleet;
					bflotte_reel[bcompteur_flotte_reel] = new Array();
					bflotte_reel[bcompteur_flotte_reel][0] = type;
					bflotte_reel[bcompteur_flotte_reel][1] = fleet;
					bcompteur_flotte_reel++;	
				}
			else {}		
		}

		//-------------------------------------------------------------------------//
		//---------------On récupère les vaisseaux de l'attaquant------------------//
		//-------------------------------------------------------------------------//
		var pt = verif(document.getElementById('ship_a_0_b').value),
			gt = verif(document.getElementById('ship_a_1_b').value),
			cle = verif(document.getElementById('ship_a_2_b').value),
			clo = verif(document.getElementById('ship_a_3_b').value),
			cro = verif(document.getElementById('ship_a_4_b').value),
			vb = verif(document.getElementById('ship_a_5_b').value),
			vc = verif(document.getElementById('ship_a_6_b').value),
			cyclo = verif(document.getElementById('ship_a_7_b').value),
			sonde = verif(document.getElementById('ship_a_8_b').value),
			bb = verif(document.getElementById('ship_a_9_b').value),
			//---
			dd = verif(document.getElementById('ship_a_11_b').value),
			rip = verif(document.getElementById('ship_a_12_b').value),
			traq = verif(document.getElementById('ship_a_13_b').value),

			tech_arme = 10,
			tech_bouclier = 10,
			tech_protection = 10;

		tablo(parseInt(pt), 0, (tech_arme*0.5 +5), (tech_bouclier*1 +10), (tech_protection*400 + 4000), "attaquant");							//pt
		tablo(parseInt(gt), 1, (tech_arme*0.5 +5), (tech_bouclier*2.5 +25), (tech_protection*1200 +12000), "attaquant");						//gt
		tablo(parseInt(cle), 2, (tech_arme*5 +50), (tech_bouclier*1 +10), (tech_protection*400 +4000), "attaquant");							//cle
		tablo(parseInt(clo), 3, (tech_arme*15 +150), (tech_bouclier*2.5 +25), (tech_protection*1000 +10000), "attaquant");						//clo
		tablo(parseInt(cro), 4, (tech_arme*40 +400), (tech_bouclier*5 +50), (tech_protection*2700 +27000), "attaquant");						//cro
		tablo(parseInt(vb), 5, (tech_arme*10 +1000), (tech_bouclier*20 +200), (tech_protection*6000 +60000), "attaquant");						//vb
		tablo(parseInt(vc), 6, (tech_arme*5 +50), (tech_bouclier*10 +100), (tech_protection*3000 +30000), "attaquant");							//vc
		tablo(parseInt(cyclo), 7, (tech_arme*0.1 +1), (tech_bouclier*1 +10), (tech_protection*6000 +16000), "attaquant");						//cycmp
		tablo(parseInt(sonde), 8, (tech_arme*0 +0), (tech_bouclier*0 +0), (tech_protection*100 +1000), "attaquant");							//sonde
		tablo(parseInt(bb), 9, (tech_arme*100 +1000), (tech_bouclier*50 +500), (tech_protection*7500 +75000), "attaquant");						//bb
		tablo(parseInt(0), 10, (tech_arme*0.1 +1), (tech_bouclier*0.1 +1), (tech_protection*200 +2000), "attaquant");							//sat
		tablo(parseInt(dd), 11, (tech_arme*200 +2000), (tech_bouclier*50 +500), (tech_protection*11000 +110000), "attaquant");					//dd
		tablo(parseInt(rip), 12, (tech_arme*20000 +200000), (tech_bouclier*5000 +50000), (tech_protection*900000 +9000000), "attaquant");		//rip
		tablo(parseInt(traq), 13, (tech_arme*70 +700), (tech_bouclier*40 +400), (tech_protection*7000 +70000), "attaquant");					//traq
		//console.log(attaquant);
		//-------------------------------------------------------------------------//
		//-------------------------------------------------------------------------//
		//-------------------------------------------------------------------------//

		


		//-----------------------------------------------------------------------//
		//---------------On récupère les vaisseaux du defenseur------------------//
		//-----------------------------------------------------------------------//
		var pt = verif(document.getElementById('ship_d_0_b').value),
			gt = verif(document.getElementById('ship_d_1_b').value),
			cle = verif(document.getElementById('ship_d_2_b').value),
			clo = verif(document.getElementById('ship_d_3_b').value),
			cro = verif(document.getElementById('ship_d_4_b').value),
			vb = verif(document.getElementById('ship_d_5_b').value),
			vc = verif(document.getElementById('ship_d_6_b').value),
			cyclo = verif(document.getElementById('ship_d_7_b').value),
			sonde = verif(document.getElementById('ship_d_8_b').value),
			bb = verif(document.getElementById('ship_d_9_b').value),
			sat = verif(document.getElementById('ship_d_10_b').value),
			dd = verif(document.getElementById('ship_d_11_b').value),
			rip = verif(document.getElementById('ship_d_12_b').value),
			traq = verif(document.getElementById('ship_d_13_b').value),

			tech_arme = 10,
			tech_bouclier = 10,
			tech_protection = 10;

		tablo(parseInt(pt), 0, (tech_arme*0.5 +5), (tech_bouclier*1 +10), (tech_protection*400 + 4000), "defenseur");							//pt
		tablo(parseInt(gt), 1, (tech_arme*0.5 +5), (tech_bouclier*2.5 +25), (tech_protection*1200 +12000), "defenseur");						//gt
		tablo(parseInt(cle), 2, (tech_arme*5 +50), (tech_bouclier*1 +10), (tech_protection*400 +4000), "defenseur");							//cle
		tablo(parseInt(clo), 3, (tech_arme*15 +150), (tech_bouclier*2.5 +25), (tech_protection*1000 +10000), "defenseur");						//clo
		tablo(parseInt(cro), 4, (tech_arme*40 +400), (tech_bouclier*5 +50), (tech_protection*2700 +27000), "defenseur");						//cro
		tablo(parseInt(vb), 5, (tech_arme*10 +1000), (tech_bouclier*20 +200), (tech_protection*6000 +60000), "defenseur");						//vb
		tablo(parseInt(vc), 6, (tech_arme*5 +50), (tech_bouclier*10 +100), (tech_protection*3000 +30000), "defenseur");							//vc
		tablo(parseInt(cyclo), 7, (tech_arme*0.1 +1), (tech_bouclier*1 +10), (tech_protection*6000 +16000), "defenseur");						//cycmp
		tablo(parseInt(sonde), 8, (tech_arme*0 +0), (tech_bouclier*0 +0), (tech_protection*100 +1000), "defenseur");							//sonde
		tablo(parseInt(bb), 9, (tech_arme*100 +1000), (tech_bouclier*50 +500), (tech_protection*7500 +75000), "defenseur");						//bb
		tablo(parseInt(sat), 10, (tech_arme*0.1 +1), (tech_bouclier*0.1 +1), (tech_protection*200 +2000), "defenseur");							//sat
		tablo(parseInt(dd), 11, (tech_arme*200 +2000), (tech_bouclier*50 +500), (tech_protection*11000 +110000), "defenseur");					//dd
		tablo(parseInt(rip), 12, (tech_arme*20000 +200000), (tech_bouclier*5000 +50000), (tech_protection*900000 +9000000), "defenseur");		//rip
		tablo(parseInt(traq), 13, (tech_arme*70 +700), (tech_bouclier*40 +400), (tech_protection*7000 +70000), "defenseur");					//traq
		//console.log(defenseur);
		//-------------------------------------------------------------------------//
		//-------------------------------------------------------------------------//
		//-------------------------------------------------------------------------//
	}

	function result_final(tour) {		//affichage du resultat
		console.log(aresult_moyenne_flotte);
		for (var o = 0; o < 14; o++)
			{
				var moyenne = 0;
				for (var i = 0; i < 10; i++)
					{
						moyenne = parseInt(aresult_moyenne_flotte[o][i]) + parseInt(moyenne);
					}
				aresult_moyenne_flotte[o][11] = (moyenne/10);
			}
		for (var o = 0; o < 14; o++)
			{
				var moyenne = 0;
				for (var i = 0; i < 10; i++)
					{
						moyenne = parseInt(bresult_moyenne_flotte[o][i]) + parseInt(moyenne);
					}
				bresult_moyenne_flotte[o][11] = (moyenne/10);
			}
		for (var o = 0; o < 3; o++)
			{
				var moyenne = 0;
				for (var i = 0; i < 10; i++)
					{
						moyenne = parseInt(result_moyenne_flotte[i][o]) + parseInt(moyenne);
					}
				result_moyenne_flotte[11][o] = (moyenne/10);
			}

		document.getElementById("nbr_tour").innerText = "Nombre de tours: ~"+result_moyenne_flotte[11][0];//tour;
		for (var i = 0; i < 14; i++)
			{
				if (i !== 10)
					{
						if ((aresult_moyenne_flotte[i][11] >= 0))
							{document.getElementById("ship_a_"+aflotte_reel[i][0]+"_e").innerText = aresult_moyenne_flotte[i][11];}
						else {document.getElementById("ship_a_"+aflotte_reel[i][0]+"_e").innerText = "";}
					}
				else {}				
			}

		for (var i = 0; i < 14; i++)
			{
				if (bresult_moyenne_flotte[i][11] >= 0)
					{document.getElementById("ship_d_"+bflotte_reel[i][0]+"_e").innerText = bresult_moyenne_flotte[i][11];}
				else {document.getElementById("ship_d_"+bflotte_reel[i][0]+"_e").innerText = "";}
			}

		if (result_moyenne_flotte[11][1] <= 0)
			{
				document.getElementById("qui_gagne").innerText = "Defenseur Gagne a 100%";
			}
		else if (result_moyenne_flotte[11][2] <= 0)
			{
				document.getElementById("qui_gagne").innerText = "Attaquant Gagne a 100%";
			}
		else {document.getElementById("qui_gagne").innerText = "Egalite";}
	}

	function result_moyenne(o) {			//on rentre les resultats de chaques tours
		for (var i = 0; i < 14; i++)
			{
				aresult_moyenne_flotte[i][marre_de_rajouter_des_variables] = aflotte_reel[i][1];
			}

		for (var i = 0; i < 14; i++)
			{
				bresult_moyenne_flotte[i][marre_de_rajouter_des_variables] = bflotte_reel[i][1];
			}
		result_moyenne_flotte[o][0] = tours;
		result_moyenne_flotte[o][1] = total_attak_tour;
		result_moyenne_flotte[o][2] = total_def_tour;
		marre_de_rajouter_des_variables++;
	}

	function verif(result) {		//on vérifie les champs vide du simulateur
		if (result === "")
			{var value = 0;}
		else if (result === undefined)
			{var value = 0;}
		else {var value = result;}
		
		return value;
	}

	function destruction_bouclier(id_victimiseur, id_victime, a_qui_le_tour) {
		if (a_qui_le_tour === "attaquant")			//c'est le tour de l'attaquant
			{
				if (attaquant_tour[id_victimiseur][1] < (defenseur_tour[id_victime][2]/100))			//si il est trop faible pour attaquer le bouclier
					{degat_a_venir = 0;}
				else {
					if (attaquant_tour[id_victimiseur][1] < (defenseur_tour[id_victime][2]))		//si il peut attaquer le bouclier mais pas la coque
						{
							defenseur_tour[id_victime][2] = defenseur_tour[id_victime][2] - attaquant_tour[id_victimiseur][1];
							degat_a_venir = 0;
						}
					else {			//si il peut attaquer la coque et on met le bouclier a 0
							degat_a_venir = attaquant_tour[id_victimiseur][1] - defenseur_tour[id_victime][2];
							defenseur_tour[id_victime][2] = 0;
					}
				}
			}
		else {
				if (defenseur_tour[id_victimiseur][1] < (attaquant_tour[id_victime][2]/100))			//si il est trop faible pour attaquer le bouclier
					{degat_a_venir = 0;}
				else {
					if (defenseur_tour[id_victimiseur][1] < (attaquant_tour[id_victime][2]))		//si il peut attaquer le bouclier mais pas la coque
						{
							attaquant_tour[id_victime][2] = attaquant_tour[id_victime][2] - defenseur_tour[id_victimiseur][1];
							degat_a_venir = 0;
						}
					else {			//si il peut attaquer la coque et on met le bouclier a 0
							degat_a_venir = defenseur_tour[id_victimiseur][1] - attaquant_tour[id_victime][2];
							attaquant_tour[id_victime][2] = 0;
					}
				}
		}
	}

	function degat_a_faire(id_victimiseur, id_victime, a_qui_le_tour) {
		if (degat_a_venir > 0)
			{
				if (a_qui_le_tour === "attaquant")
					{
						if (defenseur_tour[id_victime][3] > degat_a_venir)
							{defenseur_tour[id_victime][3] = defenseur_tour[id_victime][3] - degat_a_venir;}
						else {defenseur_tour[id_victime][3] = -1;}
					}
				else {
						if (attaquant_tour[id_victime][3] > degat_a_venir)
							{attaquant_tour[id_victime][3] = attaquant_tour[id_victime][3] - degat_a_venir;}
						else {attaquant_tour[id_victime][3] = -1;}
				}
			}
		else {}
	}

	function proba_destruction(id, a_qui_le_tour) {
		if (a_qui_le_tour === "attaquant")
			{
				var protection_70pourcent = defenseur_tour[id][5] *0.7,				//on recupère 70% de la valeur initial de la coque
					pourcent_endommagement_coque = defenseur_tour[id][3] *100;		
				pourcent_endommagement_coque = pourcent_endommagement_coque /defenseur_tour[id][5];
				if (defenseur_tour[id][3] < protection_70pourcent)
					{
						var ale = Math.floor(Math.random() *100);
						if (ale < pourcent_endommagement_coque)
							{defenseur_tour[id][3] = -1;}
						else {}					}
				else {}
			}
		else {
				var protection_70pourcent = attaquant_tour[id][5] *0.7,
					pourcent_endommagement_coque = attaquant_tour[id][3] *100;
				pourcent_endommagement_coque = pourcent_endommagement_coque /attaquant_tour[id][5];
				if (attaquant_tour[id][3] < protection_70pourcent)
					{
						var ale = Math.floor(Math.random() *100);
						if (ale < pourcent_endommagement_coque)
							{attaquant_tour[id][3] = -1;}
						else {}
					}
				else {}
		}
	}

	function rapidfire_ou_pas(id_victimiseur, id_victime, a_qui_le_tour) {
		/*var un = id_victimiseur,
			deux = id_victime;console.log(defenseur_tour[id_victime]);*/
		if (a_qui_le_tour === "attaquant")
			{
				var RF = RapidFire[attaquant_tour[id_victimiseur][0]][defenseur_tour[id_victime][0]]; // rf attaquant vs defenseur
		        if (RF > 0)
		        	{
				        var rnd = Math.random() * 100;
				        if (rnd <= RF)
					        {rapidfire = true;}
					    else {rapidfire = false;}
		        	}
		        else {}		
				//console.log(rnd, RF);	
			}
		else {
				var RF = RapidFire[defenseur_tour[id_victimiseur][0]][attaquant_tour[id_victime][0]]; // rf defenseur vs attaquant
				if (RF > 0)
					{
						var rnd = Math.random() * 100;
				        if (rnd <= RF)
					        {rapidfire = true;}
					    else {rapidfire = false;}
					}
				else {}
				//console.log(rnd, RF);
		}
	}

	function del_vaisso_detruit() {				//suppression des vaisseaux detruit
		//console.log(attaquant_tour[0][0], aflotte_reel[0][0]);
		//console.log(defenseur_tour[0][0], bflotte_reel[0][0]);
		for (var i = 0; i < total_attak_tour; i++)		//vaisseaux attaquant
			{
				if (attaquant_tour[i][3] === -1)
					{
						aflotte_reel[attaquant_tour[i][0]][1]--;acompteur_flotte_reel--;
						attaquant_tour.splice(i, 1);
						total_attak_tour--;
					}
				else {}
			}
		for (var i = 0; i < total_def_tour; i++)		//vaisseaux defenseur
			{
				if (defenseur_tour[i][3] === -1)
					{
						bflotte_reel[defenseur_tour[i][0]][1]--;bcompteur_flotte_reel--;
						defenseur_tour.splice(i, 1);
						total_def_tour--;
					}
				else {}
			}
	}

	function rearmement_bouclier() {			//rearmement du bouclier pour tout les vaisseaux non détruit
		for (var i = 0; i < total_attak_tour; i++)		//vaisseaux attaquant
			{
				attaquant_tour[i][2] = attaquant_tour[i][4];
			}
		for (var i = 0; i < total_def_tour; i++)		//vaisseaux defenseur
			{
				defenseur_tour[i][2] = defenseur_tour[i][4];
			}
	}
	
	//-------------------------------------------------------------------------//
	//-------------------------------------------------------------------------//
	//-------------------------------------------------------------------------//


	


	//-----------------------------------------------------------------------//
	//-----------------------------Simulation--------------------------------//
	//-----------------------------------------------------------------------//
	var nbr_simulation = 0;

	do {			//on fait plusieurs simulations pour avoir une moyenne
		extraction_donnes();
		attaquant_tour = attaquant;				//on remet à jours les flottes
		defenseur_tour = defenseur;
		total_attak_tour = total_attak;
		total_def_tour = total_def;
		var tours = 0;

		do {			//les 6 tours maximums
			//console.log("attaquant");
			for (var id_VaisseauTireur = 0; id_VaisseauTireur < total_attak_tour; id_VaisseauTireur++)		//c'est le tour de l'attaquant
				{
					rapidfire = false;
					do {

						if (total_def_tour > 0)
							{
								var id_VaisseauCible = Math.floor(Math.random() * (total_def_tour)); 			// selection de la cible aléatoire
								//console.log(id_VaisseauCible);
								destruction_bouclier(id_VaisseauTireur, id_VaisseauCible, "attaquant");
								degat_a_faire(id_VaisseauTireur, id_VaisseauCible, "attaquant");
								rapidfire_ou_pas(id_VaisseauTireur, id_VaisseauCible, "attaquant");
								proba_destruction(id_VaisseauCible, "attaquant");
							}
						else {}
					} while((rapidfire) && (nbr_rapidfire < 1000));	//en cas de rapidfire on recommence					
				}

			//console.log("defenseur");
			for (var id_VaisseauTireur = 0; id_VaisseauTireur < total_def_tour; id_VaisseauTireur++)		//c'est le tour du defenseur
				{
					rapidfire = false;
					do {

						if (total_def_tour > 0)
							{
								var id_VaisseauCible = Math.floor(Math.random() * (total_attak_tour)); 			// selection de la cible aléatoire
								destruction_bouclier(id_VaisseauTireur, id_VaisseauCible, "defenseur");
								degat_a_faire(id_VaisseauTireur, id_VaisseauCible, "defenseur");
								rapidfire_ou_pas(id_VaisseauTireur, id_VaisseauCible, "defenseur");
								proba_destruction(id_VaisseauCible, "defenseur");
							}
						else {}
					} while((rapidfire) && (nbr_rapidfire < 1000));	//en cas de rapidfire on recommence					
				}

			del_vaisso_detruit();
			rearmement_bouclier();
			
			tours++;
			if ((tours < 6) && (total_attak_tour > 0) && (total_def_tour > 0))
				{var continu = true;}
			else {var continu = false;}

		} while(continu);
		
		result_moyenne(nbr_simulation);
		nbr_simulation++;
	} while(nbr_simulation < 10);

	result_final(tours);
	console.log("Nombre de tours: "+tours+"\n"+ total_attak_tour, total_def_tour);
	//console.log(attaquant_tour, defenseur_tour);




	//-------------------------------------------------------------------------//
	//-------------------------------------------------------------------------//
	//-------------------------------------------------------------------------//

}
</script>